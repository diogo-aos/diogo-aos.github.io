<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Diogo Silva">
<meta name="dcterms.date" content="2021-05-27">

<title>Diogo Silva - Reusable dropdown in Elm with parameterized types — part II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Diogo Silva - Reusable dropdown in Elm with parameterized types — part II">
<meta property="og:description" content="">
<meta property="og:image" content="https://diogo-aos.github.io/blog/reusable-dropdown-in-elm-with-parameterized-types-part-ii/img/Kazam_screencast_00005.gif">
<meta property="og:site-name" content="Diogo Silva">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Diogo Silva</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html" rel="" target="">
 <span class="menu-text">research</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/diogo-aos" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://sigmoid.social/@diogo" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Reusable dropdown in Elm with parameterized types — part II</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">elm</div>
                <div class="quarto-category">elm-ui</div>
                <div class="quarto-category">algebraic-datatypes</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Diogo Silva </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 27, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Ever needed to have a dropdown on a form? Or on a configuration page? Maybe multiple dropdowns for different ends with different types? elm-ui is great, but it doesn’t offer a primitive for dropdowns. In this guide, you’ll build a reusable dropdown and, along the way, you’ll learn about parametrized types.</p>
<p>We’ll build on top of work done in <a href="../../blog/elm-elm-ui-and-the-building-of-a-dropdown-part-i/index.html">part I</a>, but if you’re familiar with Elm, you should have no trouble jumping right in. The complete code from part I is available in this <a href="https://github.com/diogo-aos/elm-ui-dropdown/releases/tag/partI">Github</a> repository.</p>
<p>In part I we built this:</p>
<p><img src="img/Kazam_screencast_00005.gif" class="img-fluid"></p>
<p>The way we did it, we can’t reuse it for other types. We’ll build a simple reusable component with consistent styling that can be reused by calling a function in our views and little added logic.</p>
<p>Here’s a refresher of the view and update logic of what we built in part I:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Model</span> <span class="op">=</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    { <span class="fu">favoriteFood</span> : <span class="dt">Maybe</span> <span class="dt">Food</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span> <span class="fu">status</span> : <span class="dt">Status</span>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Status</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">Normal</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">SelectFood</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> : <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Html</span><span class="op">.</span><span class="dt">Html</span> <span class="dt">Msg</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectedFoodName</span> <span class="op">=</span> </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">model</span><span class="op">.</span><span class="fu">favoriteFood</span> <span class="cf">of</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Nothing</span> <span class="op">-&gt;</span> <span class="st">"No food selected. Click here to select."</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Just</span> <span class="fu">food</span> <span class="op">-&gt;</span> <span class="fu">food</span><span class="op">.</span><span class="fu">name</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                <span class="fu">dropdown</span> <span class="op">=</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">model</span><span class="op">.</span><span class="fu">status</span> <span class="cf">of</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Normal</span> <span class="op">-&gt;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                        [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> <span class="dt">ClickedSelectFood</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedFoodName</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                <span class="dt">SelectFood</span> <span class="op">-&gt;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>                        [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">below</span> (<span class="fu">viewFoodList</span> <span class="fu">foodList</span>)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedFoodName</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">in</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">E</span><span class="op">.</span><span class="fu">layout</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>        []</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        <span class="dt">E</span><span class="op">.</span><span class="fu">column</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">centerX</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">centerY</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"You favorite food is:"</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">dropdown</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"... the best food."</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Msg</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">NoAction</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ClickedSelectFood</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> : <span class="dt">Msg</span> <span class="op">-&gt;</span> <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Model</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> <span class="fu">msg</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="fu">msg</span> <span class="cf">of</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>        <span class="dt">NoAction</span> <span class="op">-&gt;</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>            <span class="fu">model</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ClickedSelectFood</span> <span class="op">-&gt;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>            { <span class="fu">model</span> <span class="op">|</span> <span class="fu">status</span> <span class="op">=</span> <span class="dt">SelectFood</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For a single dropdown this is fine, but if we had, say, 5 dropdowns, we’d need 5 different Status. That is a lot of boilerplate. We’ll create a new Dropdown type to keep the state and value of the dropdown.</p>
<p>Let’s change that. Associated with dropdown is a list of options and a function that will convert an option to a string (to display). We’ll also need a message to trigger when an option is selected.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Dropdown</span> <span class="fu">a</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">Normal</span> (<span class="dt">Maybe</span> <span class="fu">a</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Select</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a parameterized type. This dropdown can receive any type (foods, countries, people, cars, whatever you need). See that <code>a</code> there? That’s the type variable.</p>
<p>This <code>Normal</code> is in conflict with our previous Status type. Go ahead and delete that entire type. Now, we’ll change the model to reference this dropdown type. we’ll need a <code>Food</code> dropdown - the <code>Food</code> will be the type of the <code>Dropdown</code>.</p>
<p>While we’re at it, change the initial model too.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Model</span> <span class="op">=</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    { <span class="fu">favoriteFood</span> : <span class="dt">Maybe</span> <span class="dt">Food</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">initialModel</span> : <span class="dt">Model</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">initialModel</span> <span class="op">=</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    { <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Normal</span> <span class="dt">Nothing</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We also don’t need status anymore. <code>Dropdown</code> will keep its state within the type.</p>
<p>Next, let’s tackle update. Since we don’t have <code>Status</code> anymore, we’ll need to start using the new <code>Dropdown</code> type here too.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> : <span class="dt">Msg</span> <span class="op">-&gt;</span> <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Model</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> <span class="fu">msg</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="fu">msg</span> <span class="cf">of</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">NoAction</span> <span class="op">-&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">model</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ClickedSelectFood</span> <span class="op">-&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Select</span> }</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ClickedDropdownFood</span> <span class="fu">food</span> <span class="op">-&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>            { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Normal</span> (<span class="dt">Just</span> <span class="fu">food</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s head over to the <code>view</code> function now. Go ahead and delete the entire let expression. Delete the <code>viewFood</code> and <code>viewFoodList</code> while you’re at it. We’ll replace these with generic functions. Now, create a <code>dropdownView</code> function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> : <span class="dt">Dropdown</span> <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">List</span> <span class="fu">a</span> <span class="op">-&gt;</span> (<span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">String</span>) <span class="op">-&gt;</span> <span class="dt">Msg</span> <span class="op">-&gt;</span> (<span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">Msg</span>) <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> <span class="fu">dropdownState</span> <span class="fu">options</span> <span class="fu">toString</span> <span class="fu">openMenuMsg</span> <span class="fu">clickedOptionMsg</span> <span class="op">=</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectedName</span> <span class="op">=</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">dropdownState</span> <span class="cf">of</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Normal</span> (<span class="dt">Just</span> <span class="fu">someA</span>) <span class="op">-&gt;</span> <span class="fu">toString</span> <span class="fu">someA</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                <span class="fu">_</span> <span class="op">-&gt;</span> <span class="st">"Click to select"</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span> <span class="op">=</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="fu">not</span> (<span class="fu">dropdownState</span> <span class="op">==</span> <span class="dt">Select</span>) <span class="cf">then</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                        [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> <span class="fu">openMenuMsg</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedName</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                <span class="kw">let</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mouseOverColor</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Color</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mouseOverColor</span> <span class="op">=</span> <span class="dt">E</span><span class="op">.</span><span class="fu">rgb</span> <span class="dv">0</span><span class="op">.</span><span class="dv">9</span> <span class="dv">0</span><span class="op">.</span><span class="dv">9</span> <span class="dv">0</span><span class="op">.</span><span class="dv">1</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>                                </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">backgroundColor</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Color</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">backgroundColor</span> <span class="op">=</span> <span class="dt">E</span><span class="op">.</span><span class="fu">rgb</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">viewOption</span> : <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">viewOption</span> <span class="fu">option</span> <span class="op">=</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>                            [ <span class="dt">E</span><span class="op">.</span><span class="fu">width</span> <span class="dt">E</span><span class="op">.</span><span class="fu">fill</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>                            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">mouseOver</span> [<span class="dt">Background</span><span class="op">.</span><span class="fu">color</span> <span class="fu">overColor</span>]</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>                            <span class="op">,</span> <span class="dt">Background</span><span class="op">.</span><span class="fu">color</span> <span class="fu">white</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>                            <span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> (<span class="fu">clickedOptionMsg</span> <span class="fu">option</span>)</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>                            ]</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>                            (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="op">&lt;|</span> <span class="fu">toString</span> <span class="fu">option</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">viewOptionList</span> : <span class="dt">List</span> <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">viewOptionList</span> <span class="fu">inputOptions</span> <span class="op">=</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">E</span><span class="op">.</span><span class="fu">column</span> [] <span class="op">&lt;|</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                            <span class="dt">List</span><span class="op">.</span><span class="fu">map</span> <span class="fu">viewOption</span> <span class="fu">inputOptions</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>                                     </span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>                <span class="kw">in</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>                        [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">below</span> (<span class="fu">viewOptionList</span> <span class="fu">options</span>)</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedName</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">in</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s go step by step. There are 5 arguments to the function. Yes, that’s a lot. What do they do?</p>
<ul>
<li><code>dropdownState</code>: gives the state of the dropdown to draw.</li>
<li><code>options</code>: gives the list of possible options from which the user can select.</li>
<li><code>toString</code>: function to convert the type of the option to a string</li>
<li><code>openMenuMsg</code>: the message that will be triggered when the user clicks the dropdown to select an option.</li>
<li><code>clickedOptionMsg</code>: the message that will be triggered when the user selects an option.</li>
</ul>
<p>We’ll simplify this further, but that will come later. For now, pay attention to the let expression - all the logic resides there. It’s pretty much what we had before in the original view. The <code>viewFood</code> was replaced by <code>viewOption</code>, which now is parameterized on <code>a</code>. <em>Idem</em> for <code>viewFoodList</code> and <code>viewOptionList</code>. All the styling is the same. The big different now is the conditions. We now check whether the dropdown state is on <code>Select</code> (meaning the select menu is open).</p>
<p>On view, we’ll now have the following:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> : <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Html</span><span class="op">.</span><span class="dt">Html</span> <span class="dt">Msg</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">E</span><span class="op">.</span><span class="fu">layout</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        []</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">E</span><span class="op">.</span><span class="fu">column</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">centerX</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">centerY</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"You favorite food is:"</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">dropdownView</span> <span class="fu">model</span><span class="op">.</span><span class="fu">favoriteFood</span> <span class="fu">foodList</span> <span class="op">.</span><span class="fu">name</span> <span class="dt">ClickedSelectFood</span> <span class="dt">ClickedDropdownFood</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"... the best food."</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The dropdown state is the <code>favoriteFood</code> in the model. <code>foodList</code> is the list of foods defined in [TODO add link] part I. <code>.name</code> is the function that will be used to convert <code>Food</code> to <code>String</code>. Then we have the two messages triggered by the two relevant events.</p>
<p>And that’s it. We now, once again, have a working dropdown. Lets simplify this further. Let’s have a single message for each dropdown and keep the option list inside the dropdown state.</p>
<section id="further-simplification" class="level1">
<h1>Further simplification</h1>
<p>The first modification is to add the option list to the <code>Select</code> variant of <code>Dropdown</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Dropdown</span> <span class="fu">a</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">Normal</span> (<span class="dt">Maybe</span> <span class="fu">a</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Select</span> (<span class="dt">List</span> <span class="fu">a</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, we just have to follow the compiler error messages and make some changes in <code>update</code> and in the <code>view</code> conditions.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> : <span class="dt">Msg</span> <span class="op">-&gt;</span> <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Model</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> <span class="fu">msg</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="fu">msg</span> <span class="cf">of</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- ...</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ClickedSelectFood</span> <span class="op">-&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>            { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Select</span> <span class="fu">foodList</span> }</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- ...</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> : <span class="dt">Dropdown</span> <span class="fu">a</span> <span class="op">-&gt;</span> (<span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">String</span>) <span class="op">-&gt;</span> <span class="dt">Msg</span> <span class="op">-&gt;</span> (<span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">Msg</span>) <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> <span class="fu">dropdownState</span> <span class="fu">toString</span> <span class="fu">openMenuMsg</span> <span class="fu">clickedOptionMsg</span> <span class="op">=</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectedName</span> <span class="op">=</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">dropdownState</span> <span class="cf">of</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Normal</span> (<span class="dt">Just</span> <span class="fu">someA</span>) <span class="op">-&gt;</span> <span class="fu">toString</span> <span class="fu">someA</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>                <span class="fu">_</span> <span class="op">-&gt;</span> <span class="st">"Click to select"</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span> <span class="op">=</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">dropdownState</span> <span class="cf">of</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                <span class="dt">Select</span> <span class="fu">options</span> <span class="op">-&gt;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">let</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mouseOverColor</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Color</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">mouseOverColor</span> <span class="op">=</span> <span class="dt">E</span><span class="op">.</span><span class="fu">rgb</span> <span class="dv">0</span><span class="op">.</span><span class="dv">9</span> <span class="dv">0</span><span class="op">.</span><span class="dv">9</span> <span class="dv">0</span><span class="op">.</span><span class="dv">1</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                                         </span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">backgroundColor</span> : <span class="dt">E</span><span class="op">.</span><span class="dt">Color</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">backgroundColor</span> <span class="op">=</span> <span class="dt">E</span><span class="op">.</span><span class="fu">rgb</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>                                          </span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">viewOption</span> : <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">viewOption</span> <span class="fu">option</span> <span class="op">=</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                            <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>                                [ <span class="dt">E</span><span class="op">.</span><span class="fu">width</span> <span class="dt">E</span><span class="op">.</span><span class="fu">fill</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>                                <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">mouseOver</span> [<span class="dt">Background</span><span class="op">.</span><span class="fu">color</span> <span class="fu">overColor</span>]</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>                                <span class="op">,</span> <span class="dt">Background</span><span class="op">.</span><span class="fu">color</span> <span class="fu">white</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>                                <span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> (<span class="fu">clickedOptionMsg</span> <span class="fu">option</span>)</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>                                ]</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>                                (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="op">&lt;|</span> <span class="fu">toString</span> <span class="fu">option</span>)</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>                                    </span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">viewOptionList</span> : <span class="dt">List</span> <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">viewOptionList</span> <span class="fu">inputOptions</span> <span class="op">=</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>                            <span class="dt">E</span><span class="op">.</span><span class="fu">column</span> [] <span class="op">&lt;|</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>                                <span class="dt">List</span><span class="op">.</span><span class="fu">map</span> <span class="fu">viewOption</span> <span class="fu">inputOptions</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>                                            </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">in</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>                            [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>                            <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">below</span> (<span class="fu">viewOptionList</span> <span class="fu">options</span>)</span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedName</span>)                </span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>                <span class="fu">_</span> <span class="op">-&gt;</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">E</span><span class="op">.</span><span class="fu">el</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>                        [ <span class="dt">Border</span><span class="op">.</span><span class="fu">width</span> <span class="dv">1</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Border</span><span class="op">.</span><span class="fu">dashed</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">padding</span> <span class="dv">3</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>                        <span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> <span class="fu">openMenuMsg</span></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>                        ]</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>                        (<span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="fu">selectedName</span>)</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">in</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">menu</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> : <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Html</span><span class="op">.</span><span class="dt">Html</span> <span class="dt">Msg</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">E</span><span class="op">.</span><span class="fu">layout</span></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a>        []</span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a>        <span class="dt">E</span><span class="op">.</span><span class="fu">column</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">centerX</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">centerY</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"You favorite food is:"</span></span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">dropdownView</span>  <span class="fu">model</span><span class="op">.</span><span class="fu">favoriteFood</span> <span class="op">.</span><span class="fu">name</span> <span class="dt">ClickedSelectFood</span> <span class="dt">ClickedDropdownFood</span></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"... the best food."</span></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The if expression was replaced by a case, since now we needed to get the option list from the dropdown <code>Select</code> variant.</p>
<p>Now, let’s have a single message for each dropdown. We’ll create a new type, specifying the available actions, namely, open the menu and click an option. Afterwards, we’ll just need a message for each dropdown. From there, it’s just following the compiler errors to refactor the rest of the program.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">DropdownAction</span> <span class="fu">a</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">OpenList</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ClickedOption</span> <span class="fu">a</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Msg</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">FoodDropdown</span> (<span class="dt">DropdownAction</span> <span class="dt">Food</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>DropdownAction</code> is also parameterized and we now have a single message for our food dropdown, which contains a <code>DropdownAction</code> triggered by user activity. We also got rid of the <code>NoAction</code> message which had been dragging along since the first example of part I.</p>
<p>Next, we’ll change the logic in <code>update.</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> : <span class="dt">Msg</span> <span class="op">-&gt;</span> <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Model</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> <span class="fu">msg</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="fu">msg</span> <span class="cf">of</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">FoodDropdown</span> <span class="fu">action</span> <span class="op">-&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">action</span> <span class="cf">of</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">OpenList</span> <span class="op">-&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                    { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Select</span> <span class="fu">foodList</span> }</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                <span class="dt">ClickedOption</span> <span class="fu">food</span> <span class="op">-&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                    { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteFood</span> <span class="op">=</span> <span class="dt">Normal</span> (<span class="dt">Just</span> <span class="fu">food</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Our two previous messages, in essence, are still there, but now they’re just variants of the possible dropdown actions, typified in <code>DropdownAction</code>. This actually makes a lot more sense. If we wanted to add more actions to a dropdown, we wouldn’t have to change this message, just the type and the resulting logic.</p>
<p>The last bit is the <code>view</code>. Since there is very little change, I’ll only cover the few lines that are refactored. First of all, we now only receive one message (which is actually a function that receives a <code>DropdownAction</code> and transforms it in a <code>Msg</code>, since all type variants also double up as functions).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> : <span class="dt">Dropdown</span> <span class="fu">a</span> <span class="op">-&gt;</span> (<span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">String</span>) <span class="op">-&gt;</span> (<span class="dt">DropdownAction</span> <span class="fu">a</span> <span class="op">-&gt;</span> <span class="dt">Msg</span>) <span class="op">-&gt;</span> <span class="dt">E</span><span class="op">.</span><span class="dt">Element</span> <span class="dt">Msg</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dropdownView</span> <span class="fu">dropdownState</span> <span class="fu">toString</span> <span class="fu">toMsg</span> <span class="op">=</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Afterwards, we need to replace the onClick events by the corresponding DropdownAction messages. First, inside <code>viewOption</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> (<span class="fu">toMsg</span> (<span class="dt">ClickedOption</span> <span class="fu">option</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, inside the Element that renders the default (closed) dropdown.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op">,</span> <span class="dt">Events</span><span class="op">.</span><span class="fu">onClick</span> (<span class="fu">toMsg</span> <span class="dt">OpenList</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And there you have it. After around 1500 words (counting code, that’s cheating you say, yes I know, but I still had to write it), we’re exactly where we were in the beginning. Ah… the circle of life.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/Untitled.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Reusable%20dropdown%20in%20Elm%20with%20parameterized%20types%20%20d1e26d5077354f649483c7b693031587/Untitled.png</figcaption>
</figure>
</div>
<p>But now, we can add another dropdown with very little work. Let’s add a favorite car dropdown. We create a <code>Car</code> type, add it to the <code>Model</code>, initialize it in <code>initialModel</code>, create a <code>CarDropdown</code> message, basically copy / paste the logic from the <code>FoodDropdown</code> and finally add two lines in <code>view</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode elm code-with-copy"><code class="sourceCode elm"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Model</span> <span class="op">=</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    { <span class="fu">favoriteFood</span> : <span class="dt">Dropdown</span> <span class="dt">Food</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span> <span class="fu">favoriteCar</span> : <span class="dt">Dropdown</span> <span class="dt">Car</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="kw">alias</span> <span class="dt">Car</span> <span class="op">=</span> {<span class="fu">id</span> : <span class="dt">Int</span><span class="op">,</span> <span class="fu">name</span>: <span class="dt">String</span>}</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> <span class="dt">Msg</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">=</span> <span class="dt">FoodDropdown</span> (<span class="dt">DropdownAction</span> <span class="dt">Food</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">CarDropdown</span> (<span class="dt">DropdownAction</span> <span class="dt">Car</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> : <span class="dt">Msg</span> <span class="op">-&gt;</span> <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Model</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span> <span class="fu">msg</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="fu">msg</span> <span class="cf">of</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- ...</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">CarDropdown</span> <span class="fu">action</span> <span class="op">-&gt;</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="fu">action</span> <span class="cf">of</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>                <span class="dt">OpenList</span> <span class="op">-&gt;</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>                    { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteCar</span> <span class="op">=</span> <span class="dt">Select</span> [<span class="dt">Car</span> <span class="dv">0</span> <span class="st">"BMW"</span><span class="op">,</span> <span class="dt">Car</span> <span class="dv">1</span> <span class="st">"Tesla"</span>] }</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>                <span class="dt">ClickedOption</span> <span class="fu">car</span> <span class="op">-&gt;</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>                    { <span class="fu">model</span> <span class="op">|</span> <span class="fu">favoriteCar</span> <span class="op">=</span> <span class="dt">Normal</span> (<span class="dt">Just</span> <span class="fu">car</span>) }</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> : <span class="dt">Model</span> <span class="op">-&gt;</span> <span class="dt">Html</span><span class="op">.</span><span class="dt">Html</span> <span class="dt">Msg</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span> <span class="fu">model</span> <span class="op">=</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">E</span><span class="op">.</span><span class="fu">layout</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        []</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">E</span><span class="op">.</span><span class="fu">column</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">centerX</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">centerY</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>            [ <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"You favorite food is:"</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">dropdownView</span>  <span class="fu">model</span><span class="op">.</span><span class="fu">favoriteFood</span> <span class="op">.</span><span class="fu">name</span> <span class="dt">FoodDropdown</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"... the best food."</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="dt">E</span><span class="op">.</span><span class="fu">text</span> <span class="st">"Favorite car:"</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">dropdownView</span> <span class="fu">model</span><span class="op">.</span><span class="fu">favoriteCar</span> <span class="op">.</span><span class="fu">name</span> <span class="dt">CarDropdown</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="img/Untitled 1.png" class="img-fluid"></p>
<p>We’re done here! A simple, reusable dropdown. If you’ve never used parameterized types, take a moment to ponder their potential and simplicity. We can actually simplify this further depending on the needs, e.g.&nbsp;having a function to update a dropdown based on its inputs. One of the advantages is the consistent style of every dropdown (or the lack of it in these examples). You can check the full code in this <a href="https://github.com/diogo-aos/elm-ui-dropdown/releases/tag/partII_done">Github</a> repository.</p>
<p>In part III, we’ll use the knowledge and practice of parameterized types to make something a little more complex. We’ll build a component that will allow us to choose several options, or none depending on the parameters. It will all be configurable. It will basically be a dropdown on steroids.</p>
<p>What do you think? How would you improve on this? Drop me a message at <a href="mailto:blog@diogoaos.com">blog@diogoaos.com</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="diogo-aos/diogo-aos.github.io" data-repo-id="R_kgDOKMT74g" data-category="blog" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>